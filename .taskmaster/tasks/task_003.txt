# Task ID: 3
# Title: Acting 노드 구현
# Status: pending
# Dependencies: 1
# Priority: high
# Description: 선택된 도구를 실행하고 결과를 관찰하는 Acting 노드를 구현합니다.
# Details:
1. 도구 실행 인터페이스 설계
2. 결과 관찰 및 캡처 메커니즘 구현
3. 상태 업데이트 로직 구현
4. 에러 핸들링 추가

```python
# Acting 노드 구현
def acting(state: AgentState) -> AgentState:
    """선택된 도구를 실행하고 결과를 관찰하는 노드"""
    selected_tool = state['selected_tool']
    tool_input = state['tool_input']
    
    try:
        # 도구 실행
        if selected_tool in available_tools:
            tool = available_tools[selected_tool]
            result = tool.run(tool_input)
            
            # 결과 캡처
            state['tool_output'] = result
            
            # 이력에 추가
            state['history'].append({
                'action': selected_tool,
                'input': tool_input,
                'output': result
            })
        else:
            # 도구를 찾을 수 없는 경우
            state['tool_output'] = f"Error: Tool '{selected_tool}' not found"
    except Exception as e:
        # 에러 핸들링
        state['tool_output'] = f"Error executing tool: {str(e)}"
    
    return state

# 도구 실행 인터페이스
class Tool:
    def __init__(self, name, description, func):
        self.name = name
        self.description = description
        self.func = func
    
    def run(self, input_data):
        return self.func(input_data)

# 사용 가능한 도구 등록
available_tools = {
    'search': Tool('search', 'Search for information', search_function),
    'code': Tool('code', 'Generate or modify code', code_function),
    'execute': Tool('execute', 'Execute code', execute_function),
    # 추가 도구들...
}
```

# Test Strategy:
1. 각 도구의 실행 정확성 테스트
2. 도구 실행 결과 캡처 검증
3. 에러 상황에서의 예외 처리 테스트
4. 다양한 입력에 대한 도구 동작 테스트
5. 상태 업데이트 정확성 검증

# Subtasks:
## 1. 도구 실행 인터페이스 설계 및 구현 [pending]
### Dependencies: None
### Description: 다양한 도구를 일관된 방식으로 실행할 수 있는 인터페이스를 설계하고 구현합니다.
### Details:
Tool 클래스를 확장하여 다양한 도구 유형을 지원하도록 구현합니다. 각 도구는 name, description, func 속성을 가지며, run 메서드를 통해 실행됩니다. 도구 등록 및 관리 메커니즘을 구현하고, 도구 메타데이터(사용법, 파라미터 형식 등)를 정의합니다. 또한 도구 검색 및 선택 기능을 추가하여 사용 가능한 도구 목록에서 적절한 도구를 찾을 수 있도록 합니다.

## 2. 도구 결과 캡처 및 처리 메커니즘 구현 [pending]
### Dependencies: 3.1
### Description: 도구 실행 결과를 표준화된 형식으로 캡처하고 처리하는 메커니즘을 구현합니다.
### Details:
다양한 형태의 도구 출력(텍스트, JSON, 바이너리 등)을 표준화된 형식으로 변환하는 결과 처리기를 구현합니다. 결과 캡처 시 메타데이터(실행 시간, 상태 코드 등)를 함께 저장하고, 대용량 결과 처리를 위한 스트리밍 메커니즘을 구현합니다. 또한 결과를 에이전트 상태에 적절히 통합하는 로직을 개발하고, 결과 형식 변환 및 정규화 기능을 추가합니다.

## 3. 상태 업데이트 및 이력 관리 로직 구현 [pending]
### Dependencies: 3.2
### Description: 도구 실행 결과에 따라 에이전트 상태를 업데이트하고 실행 이력을 관리하는 로직을 구현합니다.
### Details:
에이전트 상태(AgentState)에 도구 실행 결과를 반영하는 업데이트 로직을 구현합니다. 실행 이력을 시간순으로 기록하고 관리하는 메커니즘을 개발하며, 이력 항목에는 action, input, output 정보를 포함합니다. 이력 검색 및 필터링 기능을 추가하고, 이력 데이터 구조를 최적화하여 메모리 사용량을 관리합니다. 또한 장기 실행 시 이력 관리 전략(롤링, 압축 등)을 구현합니다.

## 4. 에러 핸들링 및 예외 처리 시스템 구현 [pending]
### Dependencies: 3.1, 3.2, 3.3
### Description: 도구 실행 중 발생할 수 있는 다양한 에러와 예외 상황을 처리하는 시스템을 구현합니다.
### Details:
도구 실행 중 발생할 수 있는 다양한 예외 유형(도구 미발견, 실행 오류, 타임아웃 등)을 식별하고 처리하는 메커니즘을 구현합니다. 에러 메시지를 표준화하고 사용자 친화적으로 변환하며, 에러 발생 시 상태 복구 및 롤백 전략을 개발합니다. 또한 재시도 메커니즘과 점진적 백오프 전략을 구현하고, 에러 로깅 및 모니터링 시스템을 통합합니다. 심각도에 따른 에러 분류 및 처리 전략도 구현합니다.

